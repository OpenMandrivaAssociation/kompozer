
 https://bugzilla.novell.com/show_bug.cgi?id=566434
 http://expat.cvs.sourceforge.net/viewvc/expat/expat/lib/xmlparse.c?r1=1.164&r2=1.166

--- mozilla/parser/expat/lib/xmlparse.c	2010-01-08 14:50:47.000000000 -0500
+++ mozilla/parser/expat/lib/xmlparse.c.oden	2010-01-08 14:51:26.000000000 -0500
@@ -3698,6 +3698,9 @@ doProlog(XML_Parser parser,
         return XML_ERROR_UNCLOSED_TOKEN;
       case XML_TOK_PARTIAL_CHAR:
         return XML_ERROR_PARTIAL_CHAR;
+      case -XML_TOK_PROLOG_S:
+        tok = -tok;
+        break;
       case XML_TOK_NONE:
 #ifdef XML_DTD
         if (enc != encoding)
